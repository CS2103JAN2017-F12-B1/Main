# A0140036X
###### \java\savvytodo\commons\util\DateTimeUtil.java
``` java
    /**
     * Generates a DateTime from start time and duration.
     * @throws IllegalValueException
     */
    public static DateTime generateDateTimeFromDuration(Date start, int field, int value)
            throws IllegalValueException {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(start);
        calendar.add(field, value);
        return new DateTime(start, calendar.getTime());
    }
}
```
###### \java\savvytodo\logic\commands\Command.java
``` java
    /**
     * Provides any needed dependencies to the command.
     * Commands making use of any of these should override this method to gain
     * access to the dependencies.
     */
    public void setDependencies(Model model, Storage storage) {
        setData(model);
        setStorage(storage);
    }

    public void setData(Model model) {
        this.model = model;
    }

    public void setStorage(Storage storage) {
        this.storage = storage;
    }
}
```
###### \java\savvytodo\logic\commands\GenerateCommand.java
``` java
/**
 * Saves and loads a big data file
 * @author A0140036X
 */
public class GenerateCommand extends Command {

    public static final String COMMAND_WORD = "generate";
    public static final String COMMAND = "generate %s";
    public static final String MESSAGE_USAGE = COMMAND_WORD
            + "Generates big data file. 'generate <filepath>'";

    public static final String MESSAGE_SUCCESS = "Generated file at %1$s";
    private static final String MESSAGE_FILE_NOT_FOUND = "Unable to generate file at %s";

    private String filePath;

    public GenerateCommand(String filePath) {
        this.filePath = filePath;
    }

```
###### \java\savvytodo\logic\commands\GenerateCommand.java
``` java
    /**
     * Generates big data file.
     */
    @Override
    public CommandResult execute() throws CommandException {
        try {
            ReadOnlyTaskManager manager = new MoreSampleDataUtil().getSampleTaskManager();
            storage.setTaskManagerStorageFilePath(filePath);
            storage.saveTaskManager(manager);
            MainApp.getRunningInstance().loadTaskManagerFile(filePath);
            return new CommandResult(getSuccessMessage(filePath));
        } catch (DataConversionException | IOException e) {
            return new CommandResult(getFailureMessage(filePath));
        }
    }

```
###### \java\savvytodo\logic\commands\GenerateCommand.java
``` java
    /**
     * Returns success message if file path was generated successfully
     * @param filePath file path of file
     */
    public static String getSuccessMessage(String filePath) {
        return String.format(MESSAGE_SUCCESS, filePath);
    }

```
###### \java\savvytodo\logic\commands\GenerateCommand.java
``` java
    /**
     * Returns failure message if file path was generated unsuccessfully
     * @param filePath file path of file
     */
    public static String getFailureMessage(String filePath) {
        return String.format(MESSAGE_FILE_NOT_FOUND, filePath);
    }

```
###### \java\savvytodo\logic\commands\GenerateCommand.java
``` java
    /**
     * Get command string
     */
    public static String getCommand(String testTaskManagerFilePath) {
        return String.format(COMMAND, testTaskManagerFilePath);
    }
}
```
###### \java\savvytodo\logic\commands\LoadCommand.java
``` java
    /**
     * Loads filepath
     */
    @Override
    public CommandResult execute() throws CommandException {
        try {
            MainApp.getRunningInstance().loadTaskManagerFile(filePath);
            return new CommandResult(getSuccessMessage(filePath));
        } catch (DataConversionException | IOException e) {
            return new CommandResult(getFailureMessage(filePath));
        }
    }

```
###### \java\savvytodo\logic\commands\LoadCommand.java
``` java
    /**
     * Returns success message if file path was loaded successfully
     * @param filePath file path of file
     */
    public static String getSuccessMessage(String filePath) {
        return String.format(MESSAGE_SUCCESS, filePath);
    }

```
###### \java\savvytodo\logic\commands\LoadCommand.java
``` java
    /**
     * Returns failure message if file path was loaded unsuccessfully
     * @param filePath file path of file
     */
    public static String getFailureMessage(String filePath) {
        return String.format(MESSAGE_FILE_NOT_FOUND, filePath);
    }
}
```
###### \java\savvytodo\logic\commands\SaveCommand.java
``` java
/**
 * Saves the task manager in specified location.
 */
public class SaveCommand extends Command {

    public static final String COMMAND_FORMAT = "save %s";
    public static final String MESSAGE_SUCCESS_FORMAT = "Task manager has been saved at %s!";
    public static final String MESSAGE_FAILED_FORMAT = "Failed to save task manager at %s!";
    public static final String COMMAND_WORD = "save";

    private String filepath;

    public SaveCommand(String filepath) {
        this.filepath = filepath;
    }

```
###### \java\savvytodo\logic\commands\SaveCommand.java
``` java
    /**
     * Saves file in specified filepath from command.
     */
    @Override
    public CommandResult execute() {
        boolean success = true;
        try {
            MainApp.getRunningInstance().saveTaskManagerToFile(filepath);
        } catch (IOException | DataConversionException e) {
            success = false;
        }
        String message = success ? getSaveSuccessMessage(filepath) : getSaveFailureMessage(filepath);
        return new CommandResult(message);
    }

```
###### \java\savvytodo\logic\commands\SaveCommand.java
``` java
    /**
     * Returns user command for saving task manager to filepath.
     */
    public static String getSaveCommand(String filePath) {
        return String.format(COMMAND_FORMAT, filePath);
    }

```
###### \java\savvytodo\logic\commands\SaveCommand.java
``` java
    /**
     * Returns message if operation was successful.
     */
    public static String getSaveSuccessMessage(String filePath) {
        return String.format(MESSAGE_SUCCESS_FORMAT, filePath);
    }

```
###### \java\savvytodo\logic\commands\SaveCommand.java
``` java
    /**
     * Returns message if operation failed.
     */
    public static String getSaveFailureMessage(String filePath) {
        return String.format(MESSAGE_SUCCESS_FORMAT, filePath);
    }
}
```
###### \java\savvytodo\logic\parser\GenerateCommandParser.java
``` java
/**
 * @author A0140036X
 * Parses input arguments and creates a new LoadCommand object
 */
public class GenerateCommandParser {
    /**
     * Parses the given {@code String} of arguments in the context of the GenerateCommand
     * and returns an LoadCommand object for execution.
     */
    public Command parse(String args) {
        ArgumentTokenizer argsTokenizer = new ArgumentTokenizer();
        argsTokenizer.tokenize(args);
        try {
            return new GenerateCommand(argsTokenizer.getPreamble().get());
        } catch (NoSuchElementException nsee) {
            return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, GenerateCommand.MESSAGE_USAGE));
        }
    }

}
```
###### \java\savvytodo\logic\parser\SaveCommandParser.java
``` java
/**
 * @author A0140036X
 * Parses input arguments and creates a new SaveCommand object
 */
public class SaveCommandParser {

```
###### \java\savvytodo\logic\parser\SaveCommandParser.java
``` java
    /**
     * Parses the given {@code String} of arguments in the context of the SaveCommand
     * and returns an SaveCommand object for execution.
     */
    public Command parse(String args) {
        ArgumentTokenizer argsTokenizer = new ArgumentTokenizer();
        argsTokenizer.tokenize(args);
        try {
            return new SaveCommand(argsTokenizer.getPreamble().get());
        } catch (NoSuchElementException nsee) {
            return new IncorrectCommand(String.format(MESSAGE_INVALID_COMMAND_FORMAT, LoadCommand.MESSAGE_USAGE));
        }
    }

}
```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Gets running JavaFX Application instance
     * @return
     */
    public static MainApp getRunningInstance() {
        return runningInstance;
    }

    @Override
    public void init() throws Exception {
        logger.info(
                "=============================[ Initializing Task Manager ]===========================");
        super.init();

        runningInstance = this;

        initEventsCenter();

        initApplicationFromConfig(getApplicationParameter("config"), true);
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Sets up application UI.
     * If useSampleDataIfStorageFileNotFound is true sample data will be loaded if storage file is not found.
     * @author A0140036X
     * @param configFilePath File path of json file containing configurations
     * @param useSampleDataIfStorageFileNotFound
     */
    public void initApplicationFromConfig(String configFilePath,
            boolean useSampleDataIfStorageFileNotFound) {
        config = initConfig(configFilePath);

        storage = new StorageManager(config.getTaskManagerFilePath(),
                config.getUserPrefsFilePath());

        userPrefs = initPrefs(config);

        initLogging(config);

        model = initModelManager(storage, userPrefs,
                useSampleDataIfStorageFileNotFound ? null : new TaskManager());
        logic = new LogicManager(model, storage);
        ui = new UiManager(logic, config, userPrefs);
    }

    private String getApplicationParameter(String parameterName) {
        Map<String, String> applicationParameters = getParameters().getNamed();
        return applicationParameters.get(parameterName);
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Initializes model based on storage.
     * If storage file is not found, default task manager provided will be used.
     * If task manager is null, sample task manager will be created.
     * @param storage Storage that is to be used by model
     * @param userPrefs User preferences for application
     * @param defaultTaskManager see method description
     * @return initialized Model
     */
    private Model initModelManager(Storage storage, UserPrefs userPrefs,
            TaskManager defaultTaskManager) {
        ReadOnlyTaskManager initialData;
        try {
            initialData = getTaskManagerFromStorage(storage, defaultTaskManager);
        } catch (DataConversionException e) {
            logger.warning(
                    "Data file not in the correct format. Will be starting with an empty TaskManager");
            initialData = new TaskManager();
        } catch (IOException e) {
            logger.warning(
                    "Problem while reading from the file. Will be starting with an empty TaskManager");
            initialData = new TaskManager();
        }

        return new ModelManager(initialData, userPrefs);
    }

```
###### \java\savvytodo\MainApp.java
``` java
    private ReadOnlyTaskManager getTaskManagerFromStorage(Storage storage2,
            ReadOnlyTaskManager defaultTaskManager) throws DataConversionException, IOException {
        Optional<ReadOnlyTaskManager> taskManagerOptional = storage.readTaskManager();
        if (!taskManagerOptional.isPresent()) {
            logger.info("Data file not found. Will be starting with "
                    + ((defaultTaskManager == null ? "a sample " : "provided ") + "TaskManager"));
        }
        logger.info("Data file found " + storage.getTaskManagerFilePath());
        ReadOnlyTaskManager initialData = taskManagerOptional.orElseGet(defaultTaskManager == null
                ? new SampleDataUtil()::getSampleTaskManager : () -> new TaskManager());
        return initialData;
    }

    private void initLogging(Config config) {
        LogsCenter.init(config);
    }

    /**
     * Loads config file from configFilePath. If not specified, MainApp.configFile will be used.
     * @param configFilePath
     * @return initialized Config
     */
    protected Config initConfig(String configFilePath) {
        Config initializedConfig;

        if (configFilePath != null) {
            logger.info("Custom Config file specified " + configFilePath);
            configFile = configFilePath;
        }

        logger.info("Using config file : " + configFile);

        try {
            Optional<Config> configOptional = ConfigUtil.readConfig(configFile);
            initializedConfig = configOptional.orElse(new Config());
        } catch (DataConversionException e) {
            logger.warning("Config file at " + configFile + " is not in the correct format. "
                    + "Using default config properties");
            initializedConfig = new Config();
        }

        //Update config file in case it was missing to begin with or there are new/unused fields
        try {
            ConfigUtil.saveConfig(initializedConfig, configFile);
        } catch (IOException e) {
            logger.warning("Failed to save config file : " + StringUtil.getDetails(e));
        }
        return initializedConfig;
    }

    /**
     * Initialized user preferences from file stored in a Config object.
     * Guarantees a UserPrefs
     * @param config
     * @return user preferences
     */
    protected UserPrefs initPrefs(Config config) {
        assert config != null;

        String prefsFilePath = config.getUserPrefsFilePath();
        logger.info("Using prefs file : " + prefsFilePath);

        UserPrefs initializedPrefs = loadUserPrefsFromFile(prefsFilePath);

        //Update prefs file in case it was missing to begin with or there are new/unused fields
        saveUserPrefs(initializedPrefs);

        return initializedPrefs;
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Attempt to load user preferences from file
     * Guarantees a UserPrefs even if file not found
     * @return user preferences
     */
    private UserPrefs loadUserPrefsFromFile(String prefsFilePath) {
        UserPrefs initializedPrefs;
        try {
            Optional<UserPrefs> prefsOptional = storage.readUserPrefs();
            initializedPrefs = prefsOptional.orElse(new UserPrefs());
        } catch (DataConversionException e) {
            logger.warning("UserPrefs file at " + prefsFilePath + " is not in the correct format. "
                    + "Using default user prefs");
            initializedPrefs = new UserPrefs();
        } catch (IOException e) {
            logger.warning(
                    "Problem while reading from the file. Will be starting with an empty TaskManager");
            initializedPrefs = new UserPrefs();
        }
        return initializedPrefs;
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Attempt to save user preferences to storage
     * @param prefs
     * @return true if successful
     */
    protected boolean saveUserPrefs(UserPrefs prefs) {
        try {
            storage.saveUserPrefs(prefs);
            return true;
        } catch (IOException e) {
            logger.warning("Failed to save preference file : " + StringUtil.getDetails(e));
            return false;
        }
    }

    private void initEventsCenter() {
        EventsCenter.getInstance().registerHandler(this);
    }

    @Override
    public void start(Stage primaryStage) {
        logger.info("Starting TaskManager " + MainApp.VERSION);
        ui.start(primaryStage);
    }

    @Override
    public void stop() {
        logger.info(
                "============================ [ Stopping Task Manager ] =============================");
        ui.stop();
        try {
            storage.saveUserPrefs(userPrefs);
        } catch (IOException e) {
            logger.severe("Failed to save preferences " + StringUtil.getDetails(e));
        }
        Platform.exit();
        System.exit(0);
    }

    @Subscribe
    public void handleExitAppRequestEvent(ExitAppRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        this.stop();
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Loads a new task manager file.
     * 1. Update and save config file with new storage file path
     * 2. Update UI with new logic
     * @throws IOException
     * @throws DataConversionException
     */
    public void loadTaskManagerFile(String filePath) throws DataConversionException, IOException {
        logger.info("Loading new file " + filePath);
        storage.setTaskManagerStorageFilePath(filePath);
        model.resetData(getTaskManagerFromStorage(storage, new TaskManager()));
        config.setTaskManagerFilePath(filePath);
        saveConfig();
        ui.refresh();
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Saves config to file.
     */
    private void saveConfig() {
        try {
            ConfigUtil.saveConfig(config, configFile);
        } catch (IOException e) {
            logger.severe("Failed to save config " + StringUtil.getDetails(e));
            this.stop();
        }
    }

```
###### \java\savvytodo\MainApp.java
``` java
    /**
     * Saves storage to filepath.
     * @throws IOException Error saving task manager
     * @throws DataConversionException
     */
    public void saveTaskManagerToFile(String filePath) throws IOException, DataConversionException {
        logger.info("Saving to file " + filePath);
        storage.saveTaskManager(model.getTaskManager(), filePath);
        loadTaskManagerFile(filePath);
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```
###### \java\savvytodo\model\category\Category.java
``` java
    @Override
    public int compareTo(Category compare) {
        return this.toString().compareTo(compare.toString());
    }
}
```
###### \java\savvytodo\model\category\UniqueCategoryList.java
``` java
    @Override
    public int compareTo(UniqueCategoryList o) {
        ObservableList<Category> thisAttributes = this.internalList;
        ObservableList<Category> thatAttributes = o.internalList;
        int lengthToCheck = Integer.min(thisAttributes.size(), thatAttributes.size());
        int compareVal;
        for (int i = 0; i < lengthToCheck; i++) {
            compareVal = thisAttributes.get(i).compareTo(thatAttributes.get(i));
            if (compareVal != 0) {
                return compareVal;
            }
        }

        if (thisAttributes.size() != thatAttributes.size()) {
            return Integer.compare(thisAttributes.size(), thatAttributes.size());
        }
        return 0;
    }

}
```
###### \java\savvytodo\model\task\DateTime.java
``` java
    public static final SimpleDateFormat DATETIME_FORMAT = new SimpleDateFormat(
            DateTimeUtil.DATE_STRING_FORMAT);

    /**
     * Default constructor
     * @throws DateTimeException
     */
    public DateTime() throws IllegalValueException {
        this(DEFAULT_VALUES);
    }

    /**
     * Validates given DateTime.
     * If DateTime is NULL, means that the task is not an event
     * @throws IllegalValueException end date occurring before start date.
     */
    public DateTime(String startDateTime, String endDateTime) throws IllegalValueException {
        if (endDateTime != null && !endDateTime.isEmpty()) {
            this.end = LocalDateTime.parse(endDateTime.trim(), DateTimeUtil.DATE_FORMATTER);
            this.endValue = this.end.format(DateTimeUtil.DATE_STRING_FORMATTER);
        } else {
            this.endValue = endDateTime;
        }
        if (startDateTime != null && !startDateTime.isEmpty()) {
            this.start = LocalDateTime.parse(startDateTime.trim(), DateTimeUtil.DATE_FORMATTER);
            this.startValue = this.start.format(DateTimeUtil.DATE_STRING_FORMATTER);
            if (!isValidEvent(this.start, this.end)) {
                throw new IllegalValueException(MESSAGE_DATETIME_CONSTRAINTS);
            }
        } else {
            this.startValue = startDateTime;
        }
    }

    public DateTime(LocalDateTime startDateTime, LocalDateTime endDateTime) {
        assert (startDateTime != null && endDateTime != null);
        this.start = startDateTime;
        this.end = endDateTime;
        this.endValue = this.end.format(DateTimeUtil.DATE_STRING_FORMATTER);
        this.startValue = this.start.format(DateTimeUtil.DATE_STRING_FORMATTER);
    }

    /**
     * Constructor when given input as String array
     * @param dateTime
     * @throws IllegalValueException
     * @throws DateTimeException
     */
    public DateTime(String[] dateTime) throws DateTimeException, IllegalValueException {
        this(dateTime[0], dateTime[1]);
    }

```
###### \java\savvytodo\model\task\DateTime.java
``` java
    /**
     * Constructor when given input are java.util.Date object
     * @throws IllegalValueException
     */
    public DateTime(Date start, Date end) throws IllegalValueException {
        this(DATETIME_FORMAT.format(start), DATETIME_FORMAT.format(end));
    }

    /**
     * Returns true if a given string is a valid task event.
     */
    public static boolean isValidEvent(LocalDateTime startDateTime, LocalDateTime endDateTime) {
        return (startDateTime.isBefore(endDateTime));
    }

    @Override
    public String toString() {
        if (this.start != null && this.end != null) {
            return startValue + DATETIME_STRING_TO_STRING_CONNECTOR + endValue;
        } else if (this.end != null) {
            return endValue;
        } else {
            return StringUtil.EMPTY_STRING;
        }
    }

    @Override
    public boolean equals(Object other) {
        return other == this // short circuit if same object
                || (other instanceof DateTime // instanceof handles nulls
                        && this.toString().equals(((DateTime) other).toString())); // state check
    }

    @Override
    public int compareTo(DateTime o) {
        if (this.start == null && this.end == null) {
            if (o.start == null && o.end == null) {
                return COMPARE_TO_EQUAL;
            } else {
                return COMPARE_TO_SMALLER;
            }
        }

        if (this.start == null && this.end != null) {
            if (o.start != null && o.end != null) {
                return this.end.compareTo(o.start);
            } else if (o.end != null) {
                return this.end.compareTo(o.end);
            } else {
                return COMPARE_TO_GREATER;
            }
        }

        if (this.start != null && this.end != null) {
            if (o.start != null && o.end != null) {
                int result = this.start.compareTo(o.start);
                if (result == COMPARE_TO_EQUAL) {
                    return this.end.compareTo(o.end);
                } else {
                    return result;
                }
            } else if (o.start == null && o.end != null) {
                return this.start.compareTo(o.end);
            } else {
                return COMPARE_TO_GREATER;
            }
        }

        return COMPARE_TO_EQUAL;
    }

    public LocalDateTime getStartDate() {
        return start;
    }

    public LocalDateTime getEndDate() {
        return end;
    }

    /**
     * Set method for start
     * @param LocalDateTime
     */
    public void setStart(LocalDateTime startDateTime) {
        this.start = startDateTime;
    }

    /**
     * Set method for end
     * @param LocalDateTime
     */
    public void setEnd(LocalDateTime endDateTime) {
        this.end = endDateTime;
    }

    @Override
    public int hashCode() {
        return (this.start.hashCode() + this.end.hashCode());
    }
}
```
###### \java\savvytodo\model\task\Description.java
``` java
    @Override
    public int compareTo(Description o) {
        return toString().compareTo(o.toString());
    }

}
```
###### \java\savvytodo\model\task\Location.java
``` java
    @Override
    public int compareTo(Location o) {
        return toString().compareTo(o.toString());
    }

}
```
###### \java\savvytodo\model\task\Name.java
``` java
    @Override
    public int compareTo(Name o) {
        return toString().compareTo(o.toString());
    }

}
```
###### \java\savvytodo\model\task\Recurrence.java
``` java
    @Override
    public int compareTo(Recurrence o) {
        return toString().compareTo(o.toString());
    }

}
```
###### \java\savvytodo\model\task\Status.java
``` java
    @Override
    public int compareTo(Status o) {
        return Boolean.compare(value, o.value);
    }
}
```
###### \java\savvytodo\model\task\Task.java
``` java
    /**
     * Array of string representation of all the attributes of a Task.
     */
    @SuppressWarnings("rawtypes")
    private Comparable[] attributes() {
        Comparable[] attributes = new Comparable[8];
        attributes[0] = name;
        attributes[1] = priority;
        attributes[2] = description;
        attributes[3] = location;
        attributes[4] = categories;
        attributes[5] = dateTime;
        attributes[6] = recurrence;
        attributes[7] = isCompleted;
        return attributes;
    }

```
###### \java\savvytodo\model\task\Task.java
``` java
    /**
     * Generic comparison to another task using attributes of a Task.
     */
    @SuppressWarnings("rawtypes")
    @Override
    public int compareTo(Task o) {
        Comparable[] thisAttributes = attributes();
        Comparable[] thatAttributes = o.attributes();
        int compareVal;
        for (int i = 0; i < thisAttributes.length; i++) {
            compareVal = thisAttributes[i].compareTo(thatAttributes[i]);
            if (compareVal != 0) {
                return compareVal;
            }
        }
        return 0;
    }

```
###### \java\savvytodo\model\task\Task.java
``` java
    /**
     * Checks if two lists of tasks are the same.
     */
    public static boolean areTasksSame(Task[] t1, Task[] t2) {
        if (t1 == null && t2 == null) {
            return true;
        }
        if (t1 == null || t2 == null || t1.length != t2.length) {
            return false;
        }
        Arrays.sort(t1);
        Arrays.sort(t2);

        for (int i = 0; i < t1.length; i++) {
            if (!t1[i].equals(t2[i])) {
                return false;
            }
        }
        return true;
    }
}
```
###### \java\savvytodo\model\task\UniqueTaskList.java
``` java
    /**
     * Signals that an operation would have violated the 'no duplicates' property of the list.
     */
    public static class DuplicateTaskException extends DuplicateDataException {
        private final ReadOnlyTask toAdd;

        /** Returns attempted task **/
        public ReadOnlyTask getTask() {
            return toAdd;
        }

        protected DuplicateTaskException(ReadOnlyTask toAddTask) {
            super("Operation would result in duplicate tasks");
            this.toAdd = toAddTask;
        }
    }
```
###### \java\savvytodo\model\util\MoreSampleDataUtil.java
``` java
/**
 * Get more tasks than MoreSampleDataUtil
 */
public class MoreSampleDataUtil extends SampleDataUtil {

```
###### \java\savvytodo\model\util\MoreSampleDataUtil.java
``` java
    @Override
    public Task[] getSampleTasks() {
        Calendar calendar = Calendar.getInstance();

        Task[] sampleData = new Task[50];
        int i = 0;
        Task[] lessSampleData = super.getSampleTasks();
        for (; i < lessSampleData.length; i++) {
            sampleData[i] = lessSampleData[i];
        }
        try {
            sampleData[i++] = new Task(new Name("Project Security 2"), new Priority("low"),
                    new Description("milestone 3"), new Location("Blk 30 NUS Street 29, #06-40"),
                    new UniqueCategoryList("project"), new DateTime(DateTime.DEFAULT_VALUES),
                    new Recurrence(Recurrence.DEFAULT_VALUES));
            sampleData[i++] = new Task(new Name("Dinner at Nandos"), new Priority("medium"),
                    new Description("makan"), new Location("White Sands"),
                    new UniqueCategoryList("meal"), new DateTime(DateTime.DEFAULT_VALUES),

                    new Recurrence(Recurrence.DEFAULT_VALUES));
            sampleData[i++] = new Task(new Name("Meet up with aunty Jane"), new Priority("low"),
                    new Description("2pm, Rmb to bring gifts"),
                    new Location("Blk 30 Lorong 3 Serangoon Gardens, #07-18"),
                    new UniqueCategoryList("family", "meetup"),
                    new DateTime(DateTime.DEFAULT_VALUES),
                    new Recurrence(Recurrence.DEFAULT_VALUES));
            sampleData[i++] = new Task(new Name("Skype Meeting 4"), new Priority("high"),
                    new Description("Skype meeting with project team 2"), new Location("None"),
                    new UniqueCategoryList("project"), new DateTime(),
                    new Recurrence(Recurrence.DEFAULT_VALUES));
            sampleData[i++] = new Task(new Name("David Li Brother BDay"), new Priority("low"),
                    new Description("6pm, rmb to buy present"),
                    new Location("Blk 436 Botanic Gardens 26, #16-43"),
                    new UniqueCategoryList("family"), new DateTime(DateTime.DEFAULT_VALUES),
                    new Recurrence(Recurrence.DEFAULT_VALUES));

            calendar.setTime(new Date());
            calendar.add(Calendar.WEEK_OF_YEAR, 1);
            calendar.set(Calendar.HOUR, 19);
            DateTime romanticDate = DateTimeUtil.generateDateTimeFromDuration(calendar.getTime(),
                    Calendar.DAY_OF_YEAR, 4);

            sampleData[i++] = new Task(new Name("Date with Jerome"), new Priority("high"),
                    new Description("Smart Casual"), new Location("Botanic Gardens"),
                    new UniqueCategoryList("romance"), romanticDate,
                    new Recurrence(Recurrence.DEFAULT_VALUES));

            romanticDate = DateTimeUtil.generateDateTimeFromDuration(calendar.getTime(),
                    Calendar.DAY_OF_YEAR, 14);
            sampleData[i++] = new Task(new Name("Date with Jerome 2"), new Priority("high"),
                    new Description("Smart Casual"), new Location("Botanic Gardens"),
                    new UniqueCategoryList("romance"), romanticDate,
                    new Recurrence(Recurrence.DEFAULT_VALUES));

            romanticDate = DateTimeUtil.generateDateTimeFromDuration(calendar.getTime(),
                    Calendar.DAY_OF_YEAR, 20);
            sampleData[i++] = new Task(new Name("Date with Jerome 3"), new Priority("high"),
                    new Description("Smart Casual"), new Location("Botanic Gardens"),
                    new UniqueCategoryList("romance"), romanticDate,
                    new Recurrence(Recurrence.DEFAULT_VALUES));

            int weeksToGenerate = 6;

            Date drivingDate;
            Date drivingEndDate;

            for (int w = 1; w <= weeksToGenerate; w++) {
                calendar.set(Calendar.HOUR_OF_DAY, 10);
                calendar.set(Calendar.MINUTE, 0);
                drivingDate = calendar.getTime();
                calendar.add(Calendar.HOUR, 3);
                drivingEndDate = calendar.getTime();

                sampleData[i++] = taskGenerator("Driving Lesson " + w, "high", "WEW", "Bukit Batok",
                        "driving", new DateTime(drivingDate, drivingEndDate),
                        new Recurrence(Recurrence.DEFAULT_VALUES));
            }

            // CS8888
            weeksToGenerate = 15;

            calendar.setTime(new Date());
            Date tutorialDate;
            Date tutorialEndDate;
            Date lectureDate;
            Date lectureEndDate;

            for (int w = 1; w <= weeksToGenerate; w++) {
                calendar.set(Calendar.HOUR_OF_DAY, 16);
                calendar.set(Calendar.MINUTE, 0);
                tutorialDate = calendar.getTime();
                calendar.add(Calendar.HOUR, 3);
                tutorialEndDate = calendar.getTime();

                sampleData[i++] = taskGenerator("CS8888 Tutorial " + w, "high", "Need to do", "SR1",
                        "lesson", new DateTime(tutorialDate, tutorialEndDate),
                        new Recurrence(Recurrence.DEFAULT_VALUES));

                calendar.add(Calendar.DAY_OF_YEAR, 3);
                lectureDate = calendar.getTime();
                calendar.add(Calendar.HOUR, 3);
                lectureEndDate = calendar.getTime();
                sampleData[i++] = taskGenerator("CS8888 Lecture " + w, "medium", "webcasted", "SR1",
                        "lesson", new DateTime(lectureDate, lectureEndDate),
                        new Recurrence(Recurrence.DEFAULT_VALUES));
                calendar.add(Calendar.DAY_OF_YEAR, 4);
            }

            for (Task t : sampleData) {
                assert t != null;
            }
        } catch (

        IllegalValueException e) {
            e.printStackTrace();
            throw new AssertionError("sample data cannot be invalid", e);
        }
        return sampleData;
    }

    public static Task taskGenerator(String name, String priority, String description,
            String location, String category, DateTime dateTime, Recurrence recurrence)
            throws DuplicateCategoryException, NumberFormatException, IllegalValueException {
        return new Task(new Name(name), new Priority(priority), new Description(description),
                new Location(location), new UniqueCategoryList(category), dateTime, recurrence);
    }

    public static void main(String[] args) {
        for (Task t : new MoreSampleDataUtil().getSampleTasks()) {
            System.out.println(t);
        }
    }
}
```
###### \java\savvytodo\model\util\SampleDataUtil.java
``` java
    public Task[] getSampleTasks() {
        try {
            return new Task[] {
                new Task(new Name("Project Security"), new Priority("low"),
                            new Description("milestone 3"),
                            new Location("Blk 30 NUS Street 29, #06-40"),
                            new UniqueCategoryList("project"),
                            new DateTime(DateTime.DEFAULT_VALUES),
                            new Recurrence(Recurrence.DEFAULT_VALUES)),
                new Task(new Name("Meet up with aunty"), new Priority("low"),
                            new Description("2pm, Rmb to bring gifts"),
                            new Location("Blk 30 Lorong 3 Serangoon Gardens, #07-18"),
                            new UniqueCategoryList("family", "meetup"),
                            new DateTime(DateTime.DEFAULT_VALUES),
                            new Recurrence(Recurrence.DEFAULT_VALUES)),
                new Task(new Name("Skype Meeting 3"), new Priority("high"),
                            new Description("Skype meeting with project team 2"),
                            new Location("None"), new UniqueCategoryList("project"), new DateTime(),
                            new Recurrence(Recurrence.DEFAULT_VALUES)),
                new Task(new Name("David Li BDay"), new Priority("low"),
                            new Description("6pm, rmb to buy present"),
                            new Location("Blk 436 Botanic Gardens 26, #16-43"),
                            new UniqueCategoryList("family"), new DateTime(DateTime.DEFAULT_VALUES),
                            new Recurrence(Recurrence.DEFAULT_VALUES)),
                new Task(new Name("Driving lesson"), new Priority("medium"),
                            new Description("Bring PDL and wear shoes"),
                            new Location("Ubi Crescent"), new UniqueCategoryList("Driving"),
                            new DateTime(DateTime.DEFAULT_VALUES),
                            new Recurrence(Recurrence.DEFAULT_VALUES)),
                new Task(new Name("CS8888 Test"), new Priority("high"),
                            new Description("3pm, Open Book"), new Location("NUS, MPSH 4"),
                            new UniqueCategoryList("test"), new DateTime(DateTime.DEFAULT_VALUES),
                            new Recurrence(Recurrence.DEFAULT_VALUES)) };
        } catch (IllegalValueException e) {
            throw new AssertionError("sample data cannot be invalid", e);
        }
    }

```
###### \java\savvytodo\model\util\SampleDataUtil.java
``` java
    public ReadOnlyTaskManager getSampleTaskManager() {
        try {
            TaskManager sampleAB = new TaskManager();
            for (Task sampleTask : getSampleTasks()) {
                sampleAB.addTask(sampleTask);
            }
            return sampleAB;
        } catch (DuplicateTaskException e) {
            throw new AssertionError(
                    "sample data cannot contain duplicate tasks " + e.getTask().getName(), e);
        }
    }
}
```
###### \java\savvytodo\storage\Storage.java
``` java
    /**
     * Sets task manager storage.
     */
    void setTaskManagerStorage(TaskManagerStorage taskManagerStorage);

```
###### \java\savvytodo\storage\Storage.java
``` java
    /**
     * Sets task manager storage from filepath.
     */
    void setTaskManagerStorageFilePath(String filePath);
}
```
###### \java\savvytodo\storage\StorageManager.java
``` java
    public TaskManagerStorage getTaskManagerStorage() {
        return taskManagerStorage;
    }

```
###### \java\savvytodo\storage\StorageManager.java
``` java
    @Override
    public void setTaskManagerStorageFilePath(String filePath) {
        this.taskManagerStorage = new XmlTaskManagerStorage(filePath);
    }

```
###### \java\savvytodo\storage\StorageManager.java
``` java
    @Override
    public void setTaskManagerStorage(TaskManagerStorage taskManagerStorage) {
        this.taskManagerStorage = taskManagerStorage;
    }

}
```
###### \java\savvytodo\ui\BrowserPanel.java
``` java
/**
 * @author A0140036X The Browser Panel of the App.
 */
public class BrowserPanel extends UiPart<Region> {

    private static final String FXML = "BrowserPanel.fxml";

    @FXML
    private GridPane content;

    @FXML
    private Label nameLabel;

    @FXML
    private Label dateLabel;

    @FXML
    private Label descriptionLabel;

    /**
     * @param placeholder
     *            The AnchorPane where the BrowserPanel must be inserted
     */
    public BrowserPanel(AnchorPane placeholder) {
        super(FXML);
        placeholder.setOnKeyPressed(Event::consume);
        FxViewUtil.applyAnchorBoundaryParameters(content, 0.0, 0.0, 0.0, 0.0);
        placeholder.getChildren().add(content);
    }

    public void loadTaskPage(ReadOnlyTask task) {
        nameLabel.setText(task.getName().toString().toUpperCase());
        dateLabel.setText(task.getDateTime().toString());
        descriptionLabel.setText(task.getDescription().toString());
    }

    /**
     * Frees resources allocated to the browser.
     */
    public void freeResources() {
        content = null;
    }

}
```
###### \java\savvytodo\ui\CommandBox.java
``` java
    /**
     * Sets logic for command box
     * @param logic
     */
    public void setLogic(Logic logic) {
        this.logic = logic;
    }
```
###### \java\savvytodo\ui\MainWindow.java
``` java
    /**
     * Fills the contents of the window.
     * Will create new objects if UI has not been initialized.
     * Logic will be updated if UI is already initialized.
     */
    void fillInnerParts() {
        browserPanel = new BrowserPanel(browserPlaceholder);

        if (eventTaskListPanel == null) {
            eventTaskListPanel = new EventTaskListPanel(getEventTaskListPlaceholder(),
                    logic.getFilteredEventTaskList());
        } else {
            eventTaskListPanel.setConnections(logic.getFilteredEventTaskList());
        }

        if (floatingTaskListPanel == null) {
            floatingTaskListPanel = new TaskListPanel(getFloatingTaskListPlaceholder(),
                    logic.getFilteredFloatingTaskList());
        } else {
            floatingTaskListPanel.setConnections(logic.getFilteredFloatingTaskList());
        }

        if (resultDisplay == null) {
            resultDisplay = new ResultDisplay(getResultDisplayPlaceholder());
        }

        if (statusBar == null) {
            statusBar = new StatusBarFooter(getStatusbarPlaceholder(), config.getTaskManagerFilePath());
        } else {
            statusBar.setSaveLocation(config.getTaskManagerFilePath());
        }

        if (commandBox == null) {
            commandBox = new CommandBox(getCommandBoxPlaceholder(), logic);
        } else {
            commandBox.setLogic(logic);
        }

    }

    private AnchorPane getCommandBoxPlaceholder() {
        return commandBoxPlaceholder;
    }

    private AnchorPane getStatusbarPlaceholder() {
        return statusbarPlaceholder;
    }

    private AnchorPane getResultDisplayPlaceholder() {
        return resultDisplayPlaceholder;
    }

    private AnchorPane getEventTaskListPlaceholder() {
        return eventTaskListPanelPlaceholder;
    }
    private AnchorPane getFloatingTaskListPlaceholder() {
        return floatingTaskListPanelPlaceholder;
    }
    void hide() {
        primaryStage.hide();
    }

    private void setTitle(String appTitle) {
        primaryStage.setTitle(appTitle);
    }

    /**
     * Sets the given image as the icon of the main window.
     * @param iconSource e.g. {@code "/images/help_icon.png"}
     */
    private void setIcon(String iconSource) {
        FxViewUtil.setStageIcon(primaryStage, iconSource);
    }

    /**
     * Sets the default size based on user preferences.
     */
    private void setWindowDefaultSize(UserPrefs prefs) {
        primaryStage.setHeight(prefs.getGuiSettings().getWindowHeight());
        primaryStage.setWidth(prefs.getGuiSettings().getWindowWidth());
        if (prefs.getGuiSettings().getWindowCoordinates() != null) {
            primaryStage.setX(prefs.getGuiSettings().getWindowCoordinates().getX());
            primaryStage.setY(prefs.getGuiSettings().getWindowCoordinates().getY());
        }
    }

    private void setWindowMinSize() {
        primaryStage.setMinHeight(MIN_HEIGHT);
        primaryStage.setMinWidth(MIN_WIDTH);
    }

    /**
     * Returns the current size and the position of the main Window.
     */
    GuiSettings getCurrentGuiSetting() {
        return new GuiSettings(primaryStage.getWidth(), primaryStage.getHeight(), (int) primaryStage.getX(),
                (int) primaryStage.getY());
    }

    @FXML
    public void handleHelp() {
        HelpWindow helpWindow = new HelpWindow();
        helpWindow.show();
    }

    void show() {
        primaryStage.show();
    }

    /**
     * Closes the application.
     */
    @FXML
    private void handleExit() {
        raise(new ExitAppRequestEvent());
    }

    public TaskListPanel getTaskListPanel() {
        return this.floatingTaskListPanel;
    }
    public EventTaskListPanel getEventTaskListPanel() {
        return this.eventTaskListPanel;
    }
    void loadTaskPage(ReadOnlyTask task) {
        browserPanel.loadTaskPage(task);
    }

    void releaseResources() {
        browserPanel.freeResources();
    }

    /**
     * @return logic
     */
    public Logic getLogic() {
        return logic;
    }

```
###### \java\savvytodo\ui\MainWindow.java
``` java
    /**
     * Sets the logic for the window
     * @param logic
     */
    public void setLogic(Logic logic) {
        this.logic = logic;
    }

```
###### \java\savvytodo\ui\MainWindow.java
``` java
    /**
     * Sets config for the window
     * @param config
     */
    public void setConfig(Config config) {
        this.config = config;
    }

```
###### \java\savvytodo\ui\MainWindow.java
``` java
    /**
     * Sets the text in result display box.
     */
    public void setResultDisplayText(String text) {
        raise(new NewResultAvailableEvent(text));
    }
}
```
###### \java\savvytodo\ui\Ui.java
``` java
    /** Set UI with new logic Note: Does not refresh the UI */
    void setLogic(Logic logic);

```
###### \java\savvytodo\ui\Ui.java
``` java
    /** Set UI with new config. Note: Does not refresh the UI */
    void setConfig(Config config);

```
###### \java\savvytodo\ui\Ui.java
``` java
    /** Links UI to underlying logic and config and updates UI */
    void refresh();

```
###### \java\savvytodo\ui\Ui.java
``` java
    /** Gets ui window */
    MainWindow getMainWindow();
}
```
###### \java\savvytodo\ui\UiManager.java
``` java
    /**
     * Sets logic of instance
     */
    @Override
    public void setLogic(Logic logic) {
        this.logic = logic;
    }

```
###### \java\savvytodo\ui\UiManager.java
``` java
    /**
     * Sets config of instance
     * @return
     */
    @Override
    public void setConfig(Config config) {
        this.config = config;
    }

    @Override
    public MainWindow getMainWindow() {
        return mainWindow;
    }

    public void setMainWindow(MainWindow mainWindow) {
        this.mainWindow = mainWindow;
    }

    @Override
    public void stop() {
        prefs.updateLastUsedGuiSetting(mainWindow.getCurrentGuiSetting());
        mainWindow.hide();
        mainWindow.releaseResources();
    }

    private void showFileOperationAlertAndWait(String description, String details, Throwable cause) {
        final String content = details + ":\n" + cause.toString();
        showAlertDialogAndWait(AlertType.ERROR, "File Op Error", description, content);
    }

    private Image getImage(String imagePath) {
        return new Image(MainApp.class.getResourceAsStream(imagePath));
    }

    void showAlertDialogAndWait(Alert.AlertType type, String title, String headerText, String contentText) {
        showAlertDialogAndWait(mainWindow.getPrimaryStage(), type, title, headerText, contentText);
    }

    private static void showAlertDialogAndWait(Stage owner, AlertType type, String title, String headerText,
            String contentText) {
        final Alert alert = new Alert(type);
        alert.getDialogPane().getStylesheets().add("view/DarkTheme.css");
        alert.initOwner(owner);
        alert.setTitle(title);
        alert.setHeaderText(headerText);
        alert.setContentText(contentText);
        alert.getDialogPane().setId(ALERT_DIALOG_PANE_FIELD_ID);
        alert.showAndWait();
    }

    private void showFatalErrorDialogAndShutdown(String title, Throwable e) {
        logger.severe(title + " " + e.getMessage() + StringUtil.getDetails(e));
        showAlertDialogAndWait(Alert.AlertType.ERROR, title, e.getMessage(), e.toString());
        Platform.exit();
        System.exit(1);
    }

    //==================== Event Handling Code ===============================================================

    @Subscribe
    private void handleDataSavingExceptionEvent(DataSavingExceptionEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        showFileOperationAlertAndWait("Could not save data", "Could not save data to file", event.exception);
    }

    @Subscribe
    private void handleShowHelpEvent(ShowHelpRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        mainWindow.handleHelp();
    }

    @Subscribe
    private void handleJumpToListRequestEvent(JumpToListRequestEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        if (event.targetTaskList == TaskType.FLOATING) {
            mainWindow.getTaskListPanel().scrollTo(event.targetIndex);
        } else {
            mainWindow.getEventTaskListPanel().scrollTo(event.targetIndex);
        }

    }

    @Subscribe
    private void handleTaskPanelSelectionChangedEvent(TaskPanelSelectionChangedEvent event) {
        logger.info(LogsCenter.getEventHandlingLogMessage(event));
        mainWindow.loadTaskPage(event.getNewSelection());
    }

```
###### \java\savvytodo\ui\UiManager.java
``` java
    /**
     * Refreshes the ui
     */
    @Override
    public void refresh() {
        mainWindow.fillInnerParts();
    }

}
```
###### \resources\view\DarkTheme.css
``` css
#nameLabel {
	-fx-font-size: 2em;
    -fx-text-fill: white !important;
    -fx-opacity: 1;
}

```
